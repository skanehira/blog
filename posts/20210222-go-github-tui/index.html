<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="GitHubのTUIツールを作った"><meta itemprop=description content="以前に VimでGitHubを操作するプラグインgh.vimの紹介 という記事を書きました。 こちらの記事で紹介したgh.vimはVim上でGit"><meta itemprop=datePublished content="2021-02-22T00:00:00+00:00"><meta itemprop=dateModified content="2021-02-22T00:00:00+00:00"><meta itemprop=wordCount content="2756"><meta itemprop=keywords content="Go,"><meta property="og:title" content="GitHubのTUIツールを作った"><meta property="og:description" content="以前に VimでGitHubを操作するプラグインgh.vimの紹介 という記事を書きました。 こちらの記事で紹介したgh.vimはVim上でGit"><meta property="og:type" content="article"><meta property="og:url" content="https://skanehira.github.io/blog/posts/20210222-go-github-tui/"><meta property="article:published_time" content="2021-02-22T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="GitHubのTUIツールを作った"><meta name=twitter:description content="以前に VimでGitHubを操作するプラグインgh.vimの紹介 という記事を書きました。 こちらの記事で紹介したgh.vimはVim上でGit"><link rel=apple-touch-icon sizes=180x180 href=/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=manifest href=/blog/site.webmanifest><link rel=mask-icon href=/blog/safari-pinned-tab.svg color><link rel="shortcut icon" href=/blog/favicon.ico><title>GitHubのTUIツールを作った</title><link rel=stylesheet href=https://skanehira.github.io/blog/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://skanehira.github.io/blog/>ゴリラ@転生したら人間だった件</a></div><nav class="site-nav hide-in-mobile"><a href=https://skanehira.github.io/blog/aboutme>About me</a>
<a href=https://skanehira.github.io/blog/posts/>Posts</a>
<a href=https://skanehira.github.io/blog/tags/>Tags</a></nav></div><div class="hdr-right hdr-icons"><button id=toc-btn class="hdr-btn desktop-only-ib"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3" y2="6"/><line x1="3" y1="12" x2="3" y2="12"/><line x1="3" y1="18" x2="3" y2="18"/></svg></button><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/gorilla0513 target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/skanehira target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://skanehira.github.io/blog/aboutme>About me</a></li><li><a href=https://skanehira.github.io/blog/posts/>Posts</a></li><li><a href=https://skanehira.github.io/blog/tags/>Tags</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>2021/02/22</span></div><h1>GitHubのTUIツールを作った</h1></header><div class=content><p>以前に <a href=https://skanehira.github.io/blog/posts/20201203-introduce-gh-vim/>VimでGitHubを操作するプラグインgh.vimの紹介</a> という記事を書きました。
こちらの記事で紹介した<code>gh.vim</code>はVim上でGitHubの機能を使えるようにしたVimプラグインです。仕事でがっつりGitHubを使うならとても便利なプラグインと思っています。</p><p>しかしVimを使っていない人もたくさんいるので、そういった人向けのツールあったほうが良いかなと思い、GitHubのTUIツール <a href=https://github.com/skanehira/github-tui>github-tui</a> を作りました。
CLIと比べ、TUIはインタラクティブに、そして直感的に操作できるというメリットがあるので便利なのではないかなと思っています。
余談ですが過去にDockerのTUIツール <a href=https://github.com/skanehira/docui>docui</a> を作ったりもしました。</p><p><a href=https://github.com/skanehira/github-tui>github-tui</a> は未完成ではありますが、最低限形になったし、需要があるかどうかを見たかったのでひとまず一般公開しました。
本記事は<code>github-tui</code>について、紹介と展望について書いていきますので興味ある方はぜひ最後まで読んでみてください。</p><h3 id=画面構成>画面構成<a href=#画面構成 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p><img src=https://i.gyazo.com/ca2dc9bed29bb5b446d58d9aeae94e8c.png alt></p><p><code>github-tui</code>では大きく分けて以下の3種類のパネルがあります。</p><ol><li>入力</li><li>一覧</li><li>プレビュー</li></ol><p>詳細は次のとおりです。</p><table><thead><tr><th>パネル</th><th>説明</th></tr></thead><tbody><tr><td>Filters</td><td>画面上部のクエリを入力する部分</td></tr><tr><td>issues</td><td>issue一覧</td></tr><tr><td>assignees</td><td>選択中のissueにアサインされているユーザー覧</td></tr><tr><td>labels</td><td>選択中のissueに付けたラベル一覧</td></tr><tr><td>milestones</td><td>選択中のissueに紐付いているマイルストーン</td></tr><tr><td>projects</td><td>選択中のissueに紐付いているプロジェクト一覧</td></tr><tr><td>issue preview</td><td>選択中のissue本文のプレビュー</td></tr><tr><td>comments</td><td>選択中のissueのコメント一覧</td></tr><tr><td>comment preview</td><td>選択中のコメント本文のプレビュー</td></tr><tr><td>search</td><td>画面下部の検索キーワードを入力する部分</td></tr></tbody></table><h3 id=機能>機能<a href=#機能 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>現時点ではissue関連の機能が実装されています。未実装の機能は<a href=https://github.com/skanehira/github-tui#still-under-development>こちら</a>を参照ください。</p><ul><li>Issue<ul><li>list</li><li>create</li><li>close</li><li>open</li><li>open browser</li><li>preview</li><li>edit</li></ul></li><li>Issue comment<ul><li>list</li><li>preview</li><li>delete</li><li>edit<ul><li>add</li></ul></li></ul></li></ul><h4 id=基本的な使い方>基本的な使い方<a href=#基本的な使い方 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>リポジトリを指定して起動するか、指定しない場合はカレントディレクトリのリポジトリが自動で指定されます。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># current repository</span>
$ ght

<span class=c1># specified repository</span>
$ ght owner/repo
</code></pre></div><p>起動後にissueの検索が行われ、一覧が表示されます。パネルを移動するには<code>Ctrl-N</code>/<code>Ctrl-P</code>を使います。</p><h4 id=検索>検索<a href=#検索 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p><code>github-tui</code>では<a href=https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-only-issues-or-pull-requests>search</a>のクエリを使ってissueを検索できます。現時点ではissueのみ検索可能ですが、将来的にはPRなども検索できるようにする予定です。</p><p>どんなクエリが使えるかは、searchのドキュメントを参照していただければと思いますが、たとえばissueのタイトルと本文に"ゴリラ"という文字を含んだissueを検索したい場合は次のクエリを入力してEnterを押すと検索できます。</p><pre><code>is:issue state:open ゴリラ in:body,title
</code></pre><p><img src=https://i.gyazo.com/9dbfc882ce9305b7a1652c5c71c00737.gif alt></p><p>demoのように、基本的に選択しているissueが変わる度、issue本文とコメントのプレビューが変わるようになっています。
検索時にissueの本文、それに紐づくラベルやコメントなどを一斉に取得するため、タイムラグなしにプレビューできます。</p><p>デフォルトでは検索で取得するissueは30件までとなっていますが、<code>f</code>を使って更に検索結果を取得できます。
GitHubの仕様では1度に100件まで取得可能ですが、前述したとおりissueに関連している情報も色々取得しているため30件に制限しています。
将来的にデフォルトのlimitをconfigで変更できるようにしたいと考えています。</p><h4 id=キーワード検索>キーワード検索<a href=#キーワード検索 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>一覧とプレビューパネルでは<code>/</code>を押すとキーワードを検索できます。一覧の場合は表示されている項目、プレビューパネルの場合は表示されている中身をそれぞれ検索します。</p><p><img src=https://i.gyazo.com/91631e116d3349fb043cae76f5627df1.gif alt></p><p>プレビューパネルの場合はキーワードがハイライトされ、<code>n</code>で次の、<code>N</code>で前のキーワードにジャンプできます。Vimmerならこの操作に馴染みやすいかと思います。</p><h4 id=プレビューパネルの拡大>プレビューパネルの拡大<a href=#プレビューパネルの拡大 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p><code>github-tui</code>はターミナルのサイズに合わせてパネルのサイズを動的に変更します。各パネルのサイズの割合は決まっています。
そのため、画面が小さいとプレビュー画面も小さくなりissueやコメントの本文が読みづらくなります。
その際は<code>o</code>でパネルを拡大でき、再度<code>o</code>を押すと元に戻ります。</p><p><img src=https://i.gyazo.com/6e25f0e970f0ab6ef1dbbe17b55d7ebf.gif alt></p><h4 id=issueのopenとclose>issueのOpenとClose<a href=#issueのopenとclose class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>issue一覧パネルでは<code>Ctrl-J</code>/<code>Ctrl+K</code>を使って複数のissueにチェックを付けて、それらをまとめてOpenまたはCloseできます。
チェックしていない場合は、現在選択しているissueに作用します。issueをOpenするには<code>o</code>、Closeするには<code>c</code>を使います。</p><p><img src=https://i.gyazo.com/b30c8107ae75fda1c7da42c8170c871e.gif alt></p><p>また、選択したissueを<code>Ctrl-O</code>を使ってブラウザで開くこともできます。</p><h4 id=issue作成>issue作成<a href=#issue作成 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>issue一覧パネルで<code>n</code>を使ってissueを新規作成できます。作成の際にフォームが表示されるので、<code>Tab</code>で各項目を切り替えながら必要な部分を埋めていく使い方になります。</p><p><img src=https://i.gyazo.com/fb665369057c5f096517a24e606e7884.png alt></p><p><code>Repo</code>は<code>Filters</code>にある<code>repo:owner/repo</code>から取得するので、作成する際にはそのクエリが必須です。
<code>Assignees</code>と<code>Labels</code>、<code>Projects</code>は入力補完が可能ですので、任意のキーワードを入力すると補完候補が表示されます。ただし、複数の候補を追加したい場合は<code>,</code>で区切る必要があります。これはUIによる制限です。（ツライ）</p><p><code>MileStone</code>と<code>Temaplte</code>はオプションになっていて、<code>↑</code>と<code>↓</code>で選択でき、<code>Esc</code>で選択をキャンセルできます。
<code>Edit Body</code>ボタンは<code>$EDITOR</code>で設定されているエディタを使ってissue本文を編集できますが、<code>$EDITOR</code>が特に設定されていない場合は<code>Vim</code>がデフォルトで使用されます。
<code>Create</code>ボタンで<code>Enter</code>を押下するとissueが作成されます。成功するとフォームが閉じられ1秒経ってからissue一覧が更新されます。1秒待つ理由としては作成後すぐにissue一覧を取得してもすぐに反映されないためです。</p><p><img src=https://i.gyazo.com/c9b132ac7f44d0366dbd5d932529816d.gif alt></p><p>注意点として、以下のデータがない場合は項目自体が表示されない様になっています。</p><ul><li><code>Labels</code></li><li><code>Projects</code></li><li><code>MileStone</code></li><li><code>Temaplte</code></li></ul><h3 id=今後の展望>今後の展望<a href=#今後の展望 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>基本的にブラウザでやっていたことをターミナルでもできるようにするという方針です。たとえば、issueの作成、PRの作成、PRのレビューなどです。
ただし、使用しているライブラリでは実現が難しい可能性もあるので、ある程度妥協も必要かなと考えています。
直近はまずisssueとPR周りの機能を充実させていきます。やることは多いですがコツコツ作っていきます。</p><h3 id=最後に>最後に<a href=#最後に class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>一通り、現時点の実装済みの機能について紹介しましたが、どうでしたか？便利そうだなと思ったらぜひ試してみてください。要望などはissueで受け付けますので、こういう機能欲しい！というのがあればぜひリクエストください。検討します。</p><p>そして、もし開発に興味あるなら<a href=https://twitter.com/gorilla0513>Twitter</a>で連絡をいただけるとうれしいです。</p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://skanehira.github.io/blog/tags/Go>Go</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2021/02/22 00:00</p></footer></article><aside id=toc><div class=toc-title></div><nav id=TableOfContents><ul><li><ul><li><a href=#画面構成>画面構成</a></li><li><a href=#機能>機能</a></li><li><a href=#今後の展望>今後の展望</a></li><li><a href=#最後に>最後に</a></li></ul></li></ul></nav></aside><div class="post-nav thin"><a class=next-post href=https://skanehira.github.io/blog/posts/20210308-linux-autokey/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;</span><br><span>LinuxでもEmacs風なキーバインドを設定する</span></a>
<a class=prev-post href=https://skanehira.github.io/blog/posts/20200205-go-swagger-preview/><span class=post-nav-label>&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Swaggerをプレビューする簡単なCLI</span></a></div><div id=comments class=thin></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2023 <a href=https://skanehira.github.io/blog/>skanehira</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://skanehira.github.io/blog/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://skanehira.github.io/blog/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin=anonymous></script></body></html>