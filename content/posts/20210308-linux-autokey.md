---
title: "LinuxでもEmacs風なキーバインドを設定する"
date: 2021-03-08
toc: true
tags: 
  - Linux
  - AutoKey
---

## 初めに
普段Macでカーソル移動をする時は方向キーを使わず、`<C-n>`や`<C-f>`、`<C-b>`などのEmacs風のキーバインドを使っています。
ホームポジションを崩さずにカーソルを移動できるこのキーバインドはたいへん便利ですが、Linuxではデフォルトでこのようなキーバインドを使えないです。
そのため、普段Linuxを使っているとそこが少し不便さを感じていました。

本記事では自分の備忘録も兼ねて、上記の問題を解消できる[autokey](https://github.com/autokey/autokey)というのを紹介していきます。
なお、筆者の環境は以下になります。

|         |                  |
|---------|------------------|
| OS      | Ubuntu 20.04 TLS |
| Desktop | Xorg             |

## Autokeyとは
簡単に言うとキーバインドを設定できるソフトウェアになります。
ちゃんと調べていないですが、イメージとしてはX11を通してソフトウェアに送信されるキー情報を書き換えるという感じでしょうか。
これを使用することで、キーバインドを自由に設定できます。

Ubuntuでは、次のコマンドで導入できます。

```sh
$ sudo apt install autokey-gtk
```

## なぜAutokeyなのか
Ubuntuユーザーであれば知っていると思いますが、[Gnome Tweak Tool](https://itsfoss.com/gnome-tweak-tool/)というアプリケーションがあります。
このアプリケーションではキーバインドをEmacs風に変更できます。しかし`↓`/`↑`を`<C-n>`/`<C-p>`で代用できない、といった適用しきれていない問題があります。

![](https://i.gyazo.com/0ebd07d02211b8b910bb8adf51675760.png)

そこでAutokeyも併用することで先程の問題を解決できます。今のところ特に問題なく使えているので設定を気を付ければ競合は起きないと思います。

## 設定
設定は大きく分けて以下の3ステップあります。詳細を説明していきます。

1. フォルダを作成する
2. フォルダとアプリケーションを紐付ける
3. キーバインドを設定する

autokeyはアプリケーションごとにキーバインドを設定できます
。筆者は1アプリケーションに1フォルダというふうにしていますが、特にルールはなくフォルダを自由に作成でき、名前も任意に付けられます。

![](https://i.gyazo.com/cf47ee01d936c2b4811c606c4fa75bf7.png)

フォルダとアプリケーションを紐付けるにはフォルダを選択した状態で右側にある`Window Filter`の`Set`ボタンから、`Detect Window Properties`を選択して、対象のアプリケーションにウィンドウ切り替えをすれば良いです。

![](https://i.gyazo.com/f4fa7602c2fa2e710c57e0d7c6e7713e.png)

次にキーバインドの設定ですが、フォルダ内にスクリプトを追加していき、設定を書いていきます。
フォルダを選択した状態で新規ボタンから`Script`を選択して、任意の名前を付けます。筆者の場合はキー名（たとえば削除なら`delete`など）にしています。

![](https://i.gyazo.com/501c4866cfe5ac000aca198a548386a3.png)

次に入力したキーとそれに対応するキーの設定をしていきます。スクリプトを選択して画面右側の`HotKey`を選択すると入力キーを設定できます。
次の画面で`Press to Set`を押してからキーを入力するとキャプチャしてくれます。

![](https://i.gyazo.com/884c7eb88f6d636497297251758d24f0.png)

次に対応するキーはスクリプト入力部で`keyboard.send_keys("<ctrl>+f")`と入力します。これで`HotKey`にて設定したキーを押されたらスクリプトで設定したキーが送られます。

![](https://i.gyazo.com/39560f94ee874a668368cdf98f5ecd28.png)

ちなみに筆者は次のように設定しています。

| `HotKey`    | `SendKeys`    |
|-------------|---------------|
| `<super>+f` | `<ctrl>+f`    |
| `<ctrl>+h`  | `<backspace>` |
| `<ctrl>+n`  | `<down>`      |
| `<ctrl>+p`  | `<up>`        |
| `<ctrl>+b`  | `<left>`      |
| `<ctrl>+f`  | `<right>`     |

## 参考文献
- https://github.com/autokey/autokey/wiki/API-Examples#send-keys
- https://autokey.github.io
- https://qiita.com/sassoon/items/ce6ae698fcfbd1fd8a42

## 最後に
ざっくりですが`AutoKey`について紹介しました。これでQOLがだいぶ上がったので、みなさんもぜひ試してみてください。
また、`AutoKey`の設定のより詳細な情報は参考文献を見ていただければと思います。
